import{_ as t}from"./plugin-vue_export-helper-x3n3nnut.js";import{r as e,o,c,a as l,b as n,d as s}from"./app-f-ukTfOz.js";const p={},i=n("h1",{id:"动态更新域名解析地址-以-cloudflare-为例",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#动态更新域名解析地址-以-cloudflare-为例","aria-hidden":"true"},"#"),s(" 动态更新域名解析地址 - 以 Cloudflare 为例")],-1),r=n("h2",{id:"引言",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#引言","aria-hidden":"true"},"#"),s(" 引言")],-1),u=n("p",null,"众所周知，普通家用宽带获取固定公网 IP 极其困难，但目前基本都下发了 IPv6 地址。而获取到的 IPv6 地址并非固定，因此需要定期检查并更新。",-1),k=n("blockquote",null,[n("p",null,"传统上，当你连接到互联网时，你的互联网服务提供商（ISP）会为你分配一个独特的IP地址。这个IP地址被用来识别你在互联网上的设备。然而，在某些情况下，这个IP地址可以改变，特别是如果你使用的是动态IP地址。如果你在你的设备上运行需要静态IP地址的服务，如网络服务器，这可能会导致问题。"),n("p",null,"DDNS通过提供一种将域名与你的IP地址联系起来的方法来解决这个问题。当你的IP地址改变时，DDNS服务会用新的IP地址更新你的域名的DNS记录。这允许你继续使用相同的域名来访问你的设备，即使IP地址发生变化。"),n("p",null,"   —— ChatGPT")],-1),d=n("div",{class:"language-python line-numbers-mode","data-ext":"py"},[n("pre",{python:"",class:"language-python"},[n("code",null,[n("span",{class:"token keyword"},"from"),s(" cloudflare_ddns "),n("span",{class:"token keyword"},"import"),s(` CloudFlare
`),n("span",{class:"token keyword"},"import"),s(` urllib3

`),n("span",{class:"token keyword"},"with"),s(),n("span",{class:"token builtin"},"open"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'./currentip.txt'"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token string"},"'r'"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token keyword"},"as"),s(" f"),n("span",{class:"token punctuation"},":"),s(`
    ipv6_prev `),n("span",{class:"token operator"},"="),s(" f"),n("span",{class:"token punctuation"},"."),s("read"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(`

ipv6 `),n("span",{class:"token operator"},"="),s(" urllib3"),n("span",{class:"token punctuation"},"."),s("PoolManager"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"."),s("request"),n("span",{class:"token punctuation"},"("),s("method"),n("span",{class:"token operator"},"="),n("span",{class:"token string"},"'GET'"),n("span",{class:"token punctuation"},","),s(" url"),n("span",{class:"token operator"},"="),n("span",{class:"token string"},"'http://ipv6.icanhazip.com'"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"."),s("data"),n("span",{class:"token punctuation"},"."),s("decode"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"."),s("rstrip"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(`

`),n("span",{class:"token keyword"},"print"),n("span",{class:"token punctuation"},"("),s("ipv6"),n("span",{class:"token punctuation"},")"),s(`

`),n("span",{class:"token keyword"},"if"),s(),n("span",{class:"token punctuation"},"("),s("ipv6"),n("span",{class:"token operator"},"!="),s("ipv6_prev"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},":"),s(`
    `),n("span",{class:"token keyword"},"with"),s(),n("span",{class:"token builtin"},"open"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'/home/nemo/ddns/currentip.txt'"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token string"},"'w'"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token keyword"},"as"),s(" f"),n("span",{class:"token punctuation"},":"),s(`
        f`),n("span",{class:"token punctuation"},"."),s("write"),n("span",{class:"token punctuation"},"("),s("ipv6"),n("span",{class:"token punctuation"},")"),s(`

    cf `),n("span",{class:"token operator"},"="),s(" CloudFlare"),n("span",{class:"token punctuation"},"("),s(`
        email`),n("span",{class:"token operator"},"="),n("span",{class:"token string"},"'user@hostname.com'"),n("span",{class:"token punctuation"},","),s(`
        api_key`),n("span",{class:"token operator"},"="),n("span",{class:"token string"},"'Global_API_Key'"),n("span",{class:"token punctuation"},","),s(`
        domain`),n("span",{class:"token operator"},"="),n("span",{class:"token string"},"'example.com'"),n("span",{class:"token punctuation"},")"),s(`
    subdomains `),n("span",{class:"token operator"},"="),s(),n("span",{class:"token punctuation"},"["),n("span",{class:"token string"},"''"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token string"},"'foo.'"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token string"},"'bar.'"),n("span",{class:"token punctuation"},"]"),s(`
    `),n("span",{class:"token keyword"},"for"),s(" site "),n("span",{class:"token keyword"},"in"),s(" subdomains"),n("span",{class:"token punctuation"},":"),s(`
        cf`),n("span",{class:"token punctuation"},"."),s("create_or_update_record"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'AAAA'"),n("span",{class:"token punctuation"},","),s(" site"),n("span",{class:"token operator"},"+"),n("span",{class:"token string"},"'example.com'"),n("span",{class:"token punctuation"},","),s(" ipv6"),n("span",{class:"token punctuation"},")"),s(`
    `),n("span",{class:"token keyword"},"print"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'Update DNS records success.\\n'"),n("span",{class:"token punctuation"},")"),s(`
`),n("span",{class:"token keyword"},"else"),n("span",{class:"token punctuation"},":"),s(`
    `),n("span",{class:"token keyword"},"print"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'Needn\\'t to update DNS records.\\n'"),n("span",{class:"token punctuation"},")"),s(`
`)])]),n("div",{class:"highlight-lines"},[n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("div",{class:"highlight-line"}," "),n("br"),n("br"),n("br")]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1);function b(m,v){const a=e("decl");return o(),c("div",null,[i,l(a,{aigc:"1",incomp:"1",trans:"1"}),r,u,k,d])}const g=t(p,[["render",b],["__file","ddns.html.vue"]]);export{g as default};
